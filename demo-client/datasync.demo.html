
<html>
	
	<head>
		<script src="../datasync-client/libs/jquery/jquery.js"></script>
		<script src="../datasync-client/libs/underscore/underscore.js"></script>
		<script src="../datasync-client/libs/jaydata/jaydata.js"></script>
		<script src="../datasync-client/libs/helperlib.js"></script>
		<script src="../datasync-client/datasync.js"></script>
		<script src="../datasync-client/mydb.js"></script>
		
		<script>
			
			function yes_func(haveSaved, of, res) {
				
alert(haveSaved+'\n'+of+'\n'+JSON.stringify(res));
				
				// wait until all are saved before processing
				if (haveSaved == of) {
	alert('now here!!');
					
					$('#results').html('');
					mydb.thedb['t5_checklists'].forEach( function(result) {
						
		alert(result);				
						$('#results').append(result.checklist_id+': '+result.checklist_name+'<br/>');
						
						/* all fields * /
						$.each( result, function (fld, val) {
							$('#results').append(fld+' = '+val+'<br/>');
						});
						*/
						$('#results').append('<hr/>');
					});
				}
			};
			
			function no_func(err) {
				alert('Error!\n\n'+JSON.stringify(err)+'\n\n');
			};
			
		</script>
	</head>


	<body>
		
		<button onclick="datasync.fetchFromServer('t5_checklists', '', yes_func, no_func);">Fetch Table</button>	
		
		<button onclick="mydb.thedb['t5_checklists'].forEach( function(rec) { mydb.thedb['t5_checklists'].remove(rec); }); mydb.thedb.saveChanges(); ">Remove All</button>
		
		<button onclick="datasync.setLastUpdated('now');">Set the local DB as being up-to-date</button>
		<div id="results">test</div>
		
	</body>
	
</html>